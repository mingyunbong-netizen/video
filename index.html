<!DOCTYPE html>
<html lang="ko">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  <title>ì˜ìƒ ë¹„êµ ë° 3D ëª¨ë¸ ë·°ì–´ (ìŒì„± ì¸ì‹ ê¸°ë¡ ë°•ìŠ¤)</title>
Â  Â  <style>
Â  Â  Â  Â  /* =================================================== */
Â  Â  Â  Â  /* âœ… ìŠ¤í¬ë¡¤ ì œê±° ë° ì „ì²´ í™”ë©´ ë†’ì´ ì‚¬ìš© ì„¤ì • */
Â  Â  Â  Â  /* =================================================== */
Â  Â  Â  Â  html, body {
Â  Â  Â  Â  Â  Â  margin: 0;
Â  Â  Â  Â  Â  Â  padding: 0;
Â  Â  Â  Â  Â  Â  height: 100%; /* ë·°í¬íŠ¸ ë†’ì´ ì „ì²´ ì‚¬ìš© */
Â  Â  Â  Â  Â  Â  font-family: Arial, sans-serif;
Â  Â  Â  Â  Â  Â  overflow: hidden; /* ì „ì²´ í˜ì´ì§€ ìŠ¤í¬ë¡¤ ì œê±° */
Â  Â  Â  Â  Â  Â  background-color: #f7f7f7;
Â  Â  Â  Â  }

Â  Â  Â  Â  body {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  flex-direction: column; /* ì„¸ë¡œ ë°©í–¥ìœ¼ë¡œ ì •ë ¬ */
Â  Â  Â  Â  }

Â  Â  Â  Â  /* ------------------------------------------- */
Â  Â  Â  Â  /* ë¡œê³  ìŠ¤íƒ€ì¼ */
Â  Â  Â  Â  /* ------------------------------------------- */
Â  Â  Â  Â  #homepage-logo {
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  position: fixed; /* ê³ ì • ìœ„ì¹˜ ìœ ì§€ */
Â  Â  Â  Â  Â  Â  top: 28px; /* âœ¨ ìˆ˜ì •ëœ ê°’: 35px -> 28px */
Â  Â  Â  Â  Â  Â  left: 120px; /* âœ¨ ìˆ˜ì •ëœ ê°’: 60px -> 120px */
Â  Â  Â  Â  Â  Â  font-size: 40px; /* âœ¨ ìˆ˜ì •ëœ ê°’: 30px -> 40px */
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  Â  Â  font-family: 'BookkGothic', sans-serif;
Â  Â  Â  Â  Â  Â  color: black;
Â  Â  Â  Â  Â  Â  z-index: 100;
Â  Â  Â  Â  Â  Â  transition: font-size 0.3s ease;
Â  Â  Â  Â  }
Â  Â  Â  Â  #homepage-logo:hover {
Â  Â  Â  Â  Â  Â  font-size: 42px; /* âœ¨ ìˆ˜ì •ëœ ê°’: 32px -> 42px */
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  /* âœ… ìƒˆë¡œ ì¶”ê°€ëœ ìŠ¤íƒ€ì¼: ë¡œê³  ì •ë³´ ë°•ìŠ¤ */
Â  Â  Â  Â  #logo-info-box {
Â  Â  Â  Â  Â  Â  position: fixed;
Â  Â  Â  Â  Â  Â  top: 75px; 
Â  Â  Â  Â  Â  Â  left: 120px; /* ë¡œê³  ìœ„ì¹˜ì— ë§ì¶° 60px -> 120pxë¡œ ìˆ˜ì • */
Â  Â  Â  Â  Â  Â  width: 450px; /* ë¬¸êµ¬ ê¸¸ì´ì— ë§ì¶° ì ì ˆíˆ ì¡°ì • */
Â  Â  Â  Â  Â  Â  padding: 15px;
Â  Â  Â  Â  Â  Â  background-color: rgba(255, 255, 255, 0.95); /* ë¶ˆíˆ¬ëª…í•œ í°ìƒ‰ ë°°ê²½ */
Â  Â  Â  Â  Â  Â  color: #333;
Â  Â  Â  Â  Â  Â  border: 1px solid #ccc;
Â  Â  Â  Â  Â  Â  border-radius: 8px;
Â  Â  Â  Â  Â  Â  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
Â  Â  Â  Â  Â  Â  font-size: 14px;
Â  Â  Â  Â  Â  Â  line-height: 1.6;
Â  Â  Â  Â  Â  Â  font-weight: normal;
Â  Â  Â  Â  Â  Â  z-index: 99; /* ë¡œê³ ë³´ë‹¤ ì•„ë˜ì— ìœ„ì¹˜ */
Â  Â  Â  Â  Â  Â  opacity: 0; /* ì´ˆê¸°ì—ëŠ” íˆ¬ëª…í•˜ê²Œ ìˆ¨ê¹€ */
Â  Â  Â  Â  Â  Â  visibility: hidden; /* ì´ˆê¸°ì—ëŠ” ë Œë”ë§ì—ì„œ ì œì™¸ */
Â  Â  Â  Â  Â  Â  transition: opacity 0.5s ease, visibility 0.5s ease; /* ë¶€ë“œëŸ¬ìš´ ì „í™˜ íš¨ê³¼ */
Â  Â  Â  Â  Â  Â  white-space: pre-wrap; /* ì¤„ë°”ê¿ˆì„ ìœ ì§€í•˜ë„ë¡ ì„¤ì • */
Â  Â  Â  Â  }
Â  Â  Â  Â  /* ------------------------------------------- */

Â  Â  Â  Â  /* =================================================== */
Â  Â  Â  Â  /* ìƒë‹¨ ë¹„êµ ì„¹ì…˜: ìµœì†Œ ë†’ì´ë§Œ ì°¨ì§€ (shrink: 0) */
Â  Â  Â  Â  /* =================================================== */
Â  Â  Â  Â  .top-comparison-section {
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  padding-top: 30px;
Â  Â  Â  Â  Â  Â  padding-bottom: 10px;
Â  Â  Â  Â  Â  Â  box-sizing: border-box;
Â  Â  Â  Â  Â  Â  background-color: #f7f7f7;
Â  Â  Â  Â  Â  Â  flex-shrink: 0; /* ë†’ì´ê°€ ì¤„ì–´ë“¤ì§€ ì•Šê²Œ ê³ ì • */
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  #voice-status-display {
Â  Â  Â  Â  Â  Â  width: 1000px;
Â  Â  Â  Â  Â  Â  padding: 10px;
Â  Â  Â  Â  Â  Â  margin-bottom: 20px;
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  Â  Â  color: #ffffff;
Â  Â  Â  Â  Â  Â  background-color: #000000;
Â  Â  Â  Â  Â  Â  border-radius: 5px;
Â  Â  Â  Â  Â  Â  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
Â  Â  Â  Â  Â  Â  min-height: 40px;
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  /* Flexboxë¥¼ ì‚¬ìš©í•˜ì—¬ ìˆ˜ì§/ìˆ˜í‰ ì¤‘ì•™ ì •ë ¬ */
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: center; /* ìˆ˜í‰ ì¤‘ì•™ ì •ë ¬ */
Â  Â  Â  Â  Â  Â  align-items: center; /* ìˆ˜ì§ ì¤‘ì•™ ì •ë ¬ */
Â  Â  Â  Â  }

Â  Â  Â  Â  .comparison-container {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  width: 1000px;
Â  Â  Â  Â  Â  Â  height: 500px; /* ê³ ì •ëœ ë†’ì´ */
Â  Â  Â  Â  Â  Â  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
Â  Â  Â  Â  }

Â  Â  Â  Â  .left-panel {
Â  Â  Â  Â  Â  Â  width: 500px;
Â  Â  Â  Â  Â  Â  height: 500px;
Â  Â  Â  Â  Â  Â  flex-shrink: 0;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  overflow: hidden;
Â  Â  Â  Â  Â  Â  background-color: #f0f0f0;
Â  Â  Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  Â  Â  transition: transform 0.2s ease-in-out;
Â  Â  Â  Â  Â  Â  z-index: 1; /* ê¸°ë³¸ z-index ì„¤ì • */
Â  Â  Â  Â  }

Â  Â  Â  Â  .left-panel:hover {
Â  Â  Â  Â  Â  Â  transform: scale(1.02);
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  z-index: 10; /* í˜¸ë²„ ì‹œ z-indexë¥¼ ë†’ì—¬ ì•ìœ¼ë¡œ ë‚˜ì˜¤ê²Œ í•¨ */
Â  Â  Â  Â  }

Â  Â  Â  Â  .right-panel {
Â  Â  Â  Â  Â  Â  width: 500px;
Â  Â  Â  Â  Â  Â  height: 500px;
Â  Â  Â  Â  Â  Â  flex-shrink: 0;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  box-sizing: border-box;
Â  Â  Â  Â  Â  Â  background-color: #333333;
Â  Â  Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  }

Â  Â  Â  Â  #my-video {
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  height: 100%;
Â  Â  Â  Â  Â  Â  object-fit: cover;
Â  Â  Â  Â  }

Â  Â  Â  Â  #webcam-feed {
Â  Â  Â  Â  Â  Â  width: 500px;
Â  Â  Â  Â  Â  Â  height: 500px;
Â  Â  Â  Â  Â  Â  background-color: #000;
Â  Â  Â  Â  Â  Â  object-fit: cover;
Â  Â  Â  Â  Â  Â  border: none;
Â  Â  Â  Â  Â  Â  transform: scaleX(-1);
Â  Â  Â  Â  }

Â  Â  Â  Â  .loading-text {
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  Â  Â  font-size: 1.2em;
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  width: 500px;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  /* ìŒì„± ì¸ì‹ ì˜¤ë²„ë ˆì´ */
Â  Â  Â  Â  #speech-command-overlay {
Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  top: 10px;
Â  Â  Â  Â  Â  Â  right: -300px;
Â  Â  Â  Â  Â  Â  width: 200px;
Â  Â  Â  Â  Â  Â  height: 480px; /* 500px - 20px padding */
Â  Â  Â  Â  Â  Â  padding: 10px;
Â  Â  Â  Â  Â  Â  background: rgba(0, 0, 0, 0.65);
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  Â  Â  font-size: 0.9em;
Â  Â  Â  Â  Â  Â  border-radius: 8px;
Â  Â  Â  Â  Â  Â  box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
Â  Â  Â  Â  Â  Â  box-sizing: border-box;
Â  Â  Â  Â  Â  Â  overflow-y: auto;
Â  Â  Â  Â  Â  Â  text-align: left;
Â  Â  Â  Â  Â  Â  white-space: pre-wrap;
Â  Â  Â  Â  Â  Â  z-index: 10;
Â  Â  Â  Â  Â  Â  display: none;
Â  Â  Â  Â  Â  Â  -ms-overflow-style: none;
Â  Â  Â  Â  Â  Â  scrollbar-width: none;
Â  Â  Â  Â  }
Â  Â  Â  Â  #speech-command-overlay::-webkit-scrollbar {
Â  Â  Â  Â  Â  Â  display: none;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  #interim-text {
Â  Â  Â  Â  Â  Â  color: #FFFF00;	
Â  Â  Â  Â  Â  Â  font-style: italic;
Â  Â  Â  Â  }


Â  Â  Â  Â  /* =================================================== */
Â  Â  Â  Â  /* í•˜ë‹¨ 3D ë·°ì–´: ë‚¨ì€ ëª¨ë“  ê³µê°„ì„ ì°¨ì§€ (grow: 1) */
Â  Â  Â  Â  /* =================================================== */
Â  Â  Â  Â  #threejs-container {
Â  Â  Â  Â  Â  Â  width: 100vw;
Â  Â  Â  Â  Â  Â  flex-grow: 1; /* ë‚¨ì€ ê³µê°„ì„ ëª¨ë‘ ì±„ì›€ */
Â  Â  Â  Â  Â  Â  overflow: hidden;
Â  Â  Â  Â  Â  Â  cursor: grab;
Â  Â  Â  Â  }

Â  Â  Â  Â  #threejs-container canvas {
Â  Â  Â  Â  Â  Â  display: block;
Â  Â  Â  Â  }
Â  Â  </style>
</head>
<body>
Â  Â  
Â  Â  <div id="homepage-logo" onclick="goToHomePage()">
Â  Â  Â  Â  ì„œì‚¬, ìœ„ê¸° ì†ì—ì„œ
Â  Â  </div>

Â  Â  <div id="logo-info-box">
Â  Â  Â  Â  ì†Œì…œë„¤íŠ¸ì›Œí¬ê°€ ë°œì „í•˜ë©´ì„œ ìš°ë¦¬ëŠ” ì–´ëŠ ë•Œë³´ë‹¤ ê°€ê¹Œì›Œì§€ë©´ì„œ ë©€ì–´ì¡ŒìŠµë‹ˆë‹¤.
ë‹¤ë¥¸ ì‚¬ëŒì˜ ì·¨ë¯¸, ì¢‹ì•„í•˜ëŠ” ìŒì‹ ë“± ìˆ˜ë§ì€ ì •ë³´ëŠ” ì•Œ ìˆ˜ ìˆì§€ë§Œ
ì™œ ê·¸ê²ƒë“¤ì„ ì¢‹ì•„í•˜ê²Œ ë˜ì—ˆëŠ”ì§€ëŠ” ì•Œê¸° ì–´ë ¤ì›Œì¡ŒìŠµë‹ˆë‹¤.

ì´ ì›¹ì‚¬ì´íŠ¸ëŠ” ì˜¤ëŠ˜ë‚  ì½œí¬ë¹„ì•„(ì „í™” ê³µí¬ì¦) ì‚¬ë¡€ì™€ ê°™ì´ ëŒ€í™”ë¥¼ ì–´ë ¤ì›Œí•˜ëŠ” ì‚¬ëŒë“¤ì„ ìœ„í•´ì„œ
ì‚¬ì´íŠ¸ì—ì„œ ëŒ€í™” í•´ë³´ë©° ì‚¬ëŒê³¼ì˜ ëŒ€í™”ê°€ í•„ìš”í•œ ì´ìœ ì™€ ì‚¬ëŒ ê°„ì— ì„œì‚¬ê°€
ì–´ë–»ê²Œ ìŒ“ì—¬ë‚˜ê°€ëŠ”ì§€ ì•ˆë‚´í•˜ëŠ” ì›¹ì‚¬ì´íŠ¸ì…ë‹ˆë‹¤.
Â  Â  </div>
Â  Â  <div class="top-comparison-section">
Â  Â  Â  Â  <div id="voice-status-display">ë§ˆì´í¬ ë° ì›¹ìº  ì ‘ê·¼ ê¶Œí•œì„ í—ˆìš©í•´ ì£¼ì„¸ìš”.</div>

Â  Â  Â  Â  <div class="comparison-container">
Â  Â  Â  Â  Â  Â  <div class="left-panel" id="left-video-panel">
Â  Â  Â  Â  Â  Â  Â  Â  <video id="my-video" autoplay playsinline>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <source id="video-source" src="base.mp4" type="video/mp4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ì£„ì†¡í•©ë‹ˆë‹¤. ê·€í•˜ì˜ ë¸Œë¼ìš°ì €ëŠ” ë¹„ë””ì˜¤ íƒœê·¸ë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
Â  Â  Â  Â  Â  Â  Â  Â  </video>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div class="right-panel">
Â  Â  Â  Â  Â  Â  Â  Â  <div id="loading-message" class="loading-text">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ì›¹ìº  ë° ë§ˆì´í¬ ì ‘ê·¼ì„ ìš”ì²­ ì¤‘ì…ë‹ˆë‹¤...
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <video id="webcam-feed" autoplay playsinline muted style="display: none;"></video>
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  <div id="speech-command-overlay"></div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <div id="threejs-container">
Â  Â  </div>

Â  Â  <script type="importmap">
Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  "imports": {
Â  Â  Â  Â  Â  Â  Â  Â  "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
Â  Â  Â  Â  Â  Â  Â  Â  "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  </script>

Â  Â  <script type="module">
Â  Â  Â  Â  // =================================================================
Â  Â  Â  Â  // 0. ë¡œê³  í´ë¦­ ì‹œ ì´ë™ í•¨ìˆ˜
Â  Â  Â  Â  // =================================================================
Â  Â  Â  Â  function goToHomePage() {
Â  Â  Â  Â  Â  Â  const targetUrl = 'https://mingyunbong-netizen.github.io/home/#';
Â  Â  Â  Â  Â  Â  window.location.href = targetUrl;
Â  Â  Â  Â  }
Â  Â  Â  Â  window.goToHomePage = goToHomePage;


Â  Â  Â  Â  // =================================================================
Â  Â  Â  Â  // 4. ë¡œê³  í˜¸ë²„ ì´ë²¤íŠ¸ ë¡œì§ (ì¶”ê°€ëœ ë¶€ë¶„)
Â  Â  Â  Â  // =================================================================
Â  Â  Â  Â  const homepageLogo = document.getElementById('homepage-logo');
Â  Â  Â  Â  const logoInfoBox = document.getElementById('logo-info-box');

Â  Â  Â  Â  if (homepageLogo && logoInfoBox) {
Â  Â  Â  Â  Â  Â  // ë§ˆìš°ìŠ¤ ì˜¤ë²„ ì‹œ
Â  Â  Â  Â  Â  Â  homepageLogo.addEventListener('mouseenter', () => {
Â  Â  Â  Â  Â  Â  Â  Â  logoInfoBox.style.opacity = '1';
Â  Â  Â  Â  Â  Â  Â  Â  logoInfoBox.style.visibility = 'visible';
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  // ë§ˆìš°ìŠ¤ ì´íƒˆ ì‹œ
Â  Â  Â  Â  Â  Â  homepageLogo.addEventListener('mouseleave', () => {
Â  Â  Â  Â  Â  Â  Â  Â  logoInfoBox.style.opacity = '0';
Â  Â  Â  Â  Â  Â  Â  Â  // íˆ¬ëª…í™”ê°€ ì™„ë£Œëœ í›„ ì™„ì „íˆ ìˆ¨ê¹€ (transition ì‹œê°„ ê³ ë ¤)
Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  logoInfoBox.style.visibility = 'hidden';
Â  Â  Â  Â  Â  Â  Â  Â  }, 500); 
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }


Â  Â  Â  Â  // =================================================================
Â  Â  Â  Â  // 1. DOM ë° ë¹„ë””ì˜¤ ì œì–´ ë¡œì§
Â  Â  Â  Â  // =================================================================
Â  Â  Â  Â  const videoElement = document.getElementById('webcam-feed');
Â  Â  Â  Â  const loadingMessage = document.getElementById('loading-message');
Â  Â  Â  Â  const myVideo = document.getElementById('my-video');
Â  Â  Â  Â  const videoSource = document.getElementById('video-source');
Â  Â  Â  Â  const leftVideoPanel = document.getElementById('left-video-panel');
Â  Â  Â  Â  const voiceStatusDisplay = document.getElementById('voice-status-display');
Â  Â  Â  Â  const speechCommandOverlay = document.getElementById('speech-command-overlay');

Â  Â  Â  Â  const BASE_VIDEO_PATH = "base.mp4";


Â  Â  Â  Â  if (myVideo) {
Â  Â  Â  Â  Â  Â  myVideo.loop = true;
Â  Â  Â  Â  Â  Â  myVideo.muted = true;
Â  Â  Â  Â  Â  Â  myVideo.play().catch(error => {
Â  Â  Â  Â  Â  Â  Â  Â  console.log("ìë™ ì¬ìƒì´ ì°¨ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤. í˜ì´ì§€ë¥¼ í´ë¦­í•´ ì£¼ì„¸ìš”.");
Â  Â  Â  Â  Â  Â  Â  Â  document.addEventListener('click', () => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  myVideo.play().catch(e => console.log("ì¬ìƒ ì‹¤íŒ¨:", e));
Â  Â  Â  Â  Â  Â  Â  Â  }, { once: true });
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  myVideo.addEventListener('ended', () => {
Â  Â  Â  Â  Â  Â  const currentVideoName = myVideo.currentSrc.substring(myVideo.currentSrc.lastIndexOf('/') + 1);
Â  Â  Â  Â  Â  Â  if (currentVideoName !== BASE_VIDEO_PATH) {
Â  Â  Â  Â  Â  Â  Â  Â  switchToBaseVideo();
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });

Â  Â  Â  Â  function switchToBaseVideo() {
Â  Â  Â  Â  Â  Â  videoSource.src = BASE_VIDEO_PATH;
Â  Â  Â  Â  Â  Â  myVideo.load();
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  myVideo.loop = true;
Â  Â  Â  Â  Â  Â  myVideo.muted = true;
Â  Â  Â  Â  Â  Â  myVideo.play().catch(e => console.error("ê¸°ë³¸ ë¹„ë””ì˜¤ ì¬ìƒ ì‹¤íŒ¨:", e));
Â  Â  Â  Â  }

Â  Â  Â  Â  leftVideoPanel.addEventListener('click', () => {
Â  Â  Â  Â  Â  Â  const currentVideoName = myVideo.currentSrc.substring(myVideo.currentSrc.lastIndexOf('/') + 1);
Â  Â  Â  Â  Â  Â  if (currentVideoName === BASE_VIDEO_PATH) {
Â  Â  Â  Â  Â  Â  Â  Â  playSpecificVideo('hi.mp4');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });

Â  Â  Â  Â  function playSpecificVideo(videoPath) {
Â  Â  Â  Â  Â  Â  myVideo.loop = false;
Â  Â  Â  Â  Â  Â  myVideo.muted = false;

Â  Â  Â  Â  Â  Â  videoSource.src = videoPath;
Â  Â  Â  Â  Â  Â  myVideo.load();

Â  Â  Â  Â  Â  Â  myVideo.play().catch(e => {
Â  Â  Â  Â  Â  Â  Â  Â  console.error(`ë¹„ë””ì˜¤ ì¬ìƒ ì‹¤íŒ¨ (${videoPath}):`, e);
Â  Â  Â  Â  Â  Â  Â  Â  myVideo.muted = true;
Â  Â  Â  Â  Â  Â  Â  Â  myVideo.play().catch(e2 => console.error("ìŒì†Œê±° ì¬ìƒë„ ì‹¤íŒ¨:", e2));
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  // =================================================================
Â  Â  Â  Â  // 2. ìŒì„± ì¸ì‹ ë° í†µí•© ë¡œì§ (ê°œì„ )
Â  Â  Â  Â  // =================================================================

Â  Â  Â  Â  window.SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;

Â  Â  Â  Â  const speechRecognition = window.SpeechRecognition ? new SpeechRecognition() : null;
Â  Â  Â  Â  let isListening = false;
Â  Â  Â  Â  let isMediaReady = false;
Â  Â  Â  Â  
Â  Â  Â  Â  // ëˆ„ì ëœ ìŒì„± ê¸°ë¡ì„ ì €ì¥í•˜ëŠ” ë³€ìˆ˜
Â  Â  Â  Â  let accumulatedTranscript = 'ëŒ€í™” ë©”ëª¨ì¥\n';	

Â  Â  Â  Â  // ëª¨ë¸ ì •ë³´ ì •ì˜
Â  Â  Â  Â  const modelsToLoad = [
Â  Â  Â  Â  Â  Â  { name: 'shoes.glb', scale: 10, video: 'shoes.mp4', keyword: 'ì‹ ë°œ' },
Â  Â  Â  Â  Â  Â  { name: 'bag.glb', scale: 7, video: 'bag.mp4', keyword: 'ê°€ë°©' },
Â  Â  Â  Â  Â  Â  { name: 'ball.glb', scale: 5, video: 'Stretching.mp4', keyword: 'ê³µ' },
Â  Â  Â  Â  Â  Â  { name: 'book.glb', scale: 10, video: 'book.mp4', keyword: 'ì±…' },
Â  Â  Â  Â  Â  Â  { name: 'close.glb', scale: 5, video: 'clothes.mp4', keyword: 'ì˜·' },
Â  Â  Â  Â  Â  Â  { name: 'glasses.glb', scale: 20, video: 'glasses.mp4', keyword: 'ì•ˆê²½' },
Â  Â  Â  Â  Â  Â  { name: 'guard.glb', scale: 10, video: 'brace.mp4', keyword: 'ë³´í˜¸ëŒ€' },
Â  Â  Â  Â  Â  Â  { name: 'persimmon.glb', scale: 20, video: 'food.mp4', keyword: 'ê°' },
Â  Â  Â  Â  ];

Â  Â  Â  Â  // ìŒì„± ì¸ì‹ í‚¤ì›Œë“œ ë§µì„ modelsToLoadë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìƒì„±
Â  Â  Â  Â  const modelKeywordMap = {};
Â  Â  Â  Â  modelsToLoad.forEach(model => {
Â  Â  Â  Â  Â  Â  if (model.keyword) {
Â  Â  Â  Â  Â  Â  Â  Â  modelKeywordMap[model.keyword] = model.video;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });
Â  Â  Â  Â  modelKeywordMap['ê¸°ë³¸'] = BASE_VIDEO_PATH;	

Â  Â  Â  Â  // ì‚¬ìš©ì ì•ˆë‚´ë¥¼ ìœ„í•œ í‚¤ì›Œë“œ ë¬¸ìì—´ ìƒì„±
Â  Â  Â  Â  const keywords = Object.keys(modelKeywordMap).filter(k => k !== 'ê¸°ë³¸').join(', ');

Â  Â  Â  Â  function startSpeechRecognition() {
Â  Â  Â  Â  Â  Â  if (!speechRecognition) {
Â  Â  Â  Â  Â  Â  Â  Â  voiceStatusDisplay.innerText = "âŒ ìŒì„± ì¸ì‹ì´ ì§€ì›ë˜ì§€ ì•ŠëŠ” ë¸Œë¼ìš°ì €ì…ë‹ˆë‹¤.";
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  speechRecognition.continuous = true;
Â  Â  Â  Â  Â  Â  speechRecognition.interimResults = true;	
Â  Â  Â  Â  Â  Â  speechRecognition.lang = 'ko-KR';

Â  Â  Â  Â  Â  Â  speechRecognition.onstart = function() {
Â  Â  Â  Â  Â  Â  Â  Â  isListening = true;
Â  Â  Â  Â  Â  Â  Â  Â  // ë™ì ìœ¼ë¡œ ìƒì„±í•œ í‚¤ì›Œë“œ ëª©ë¡ì„ ì•ˆë‚´ ë©”ì‹œì§€ì— í¬í•¨
Â  Â  Â  Â  Â  Â  Â  Â  voiceStatusDisplay.innerText = `ğŸ’¬ ëŒ€í™”ë¥¼ ê±¸ì–´ì£¼ì„¸ìš”! "${keywords}" ë“±ì„ ë§í•´ë³´ì„¸ìš”.`;
Â  Â  Â  Â  Â  Â  Â  Â  speechCommandOverlay.style.display = 'block';
Â  Â  Â  Â  Â  Â  Â  Â  // HTMLë¡œ ëˆ„ì  ê¸°ë¡ ì´ˆê¸° í‘œì‹œ
Â  Â  Â  Â  Â  Â  Â  Â  speechCommandOverlay.innerHTML = `<div>${accumulatedTranscript.replace(/\n/g, '<br>')}</div><span id="interim-text">...ë§ì”€í•˜ì„¸ìš”.</span>`;	
Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â  speechRecognition.onresult = function(event) {
Â  Â  Â  Â  Â  Â  Â  Â  let interimTranscript = '';
Â  Â  Â  Â  Â  Â  Â  Â  let finalTranscript = '';
Â  Â  Â  Â  Â  Â  Â  Â  let latestFinalTranscript = '';

Â  Â  Â  Â  Â  Â  Â  Â  for (let i = event.resultIndex; i < event.results.length; i++) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const transcript = event.results[i][0].transcript;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (event.results[i].isFinal) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  finalTranscript += transcript;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  latestFinalTranscript = transcript;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  interimTranscript += transcript;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  // ìµœì¢… í…ìŠ¤íŠ¸ë¥¼ ëˆ„ì  ê¸°ë¡ ë³€ìˆ˜ì— ì¶”ê°€ (ì¤„ë°”ê¿ˆ í¬í•¨)
Â  Â  Â  Â  Â  Â  Â  Â  if (finalTranscript) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  accumulatedTranscript += finalTranscript + '\n';
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  // í™”ë©´ì— 'ëˆ„ì ëœ ìµœì¢… ê¸°ë¡'ê³¼ 'í˜„ì¬ ë§í•˜ê³  ìˆëŠ” ì„ì‹œ í…ìŠ¤íŠ¸'ë¥¼ HTML íƒœê·¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¶„ë¦¬í•˜ì—¬ í‘œì‹œ
Â  Â  Â  Â  Â  Â  Â  Â  speechCommandOverlay.innerHTML =	
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  `<div>${accumulatedTranscript.replace(/\n/g, '<br>')}</div>` +	
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  `<span id="interim-text">${interimTranscript}</span>`;

Â  Â  Â  Â  Â  Â  Â  Â  // ìŠ¤í¬ë¡¤ì´ ìƒê¸´ ê²½ìš° ê°€ì¥ ì•„ë˜ë¡œ ì´ë™
Â  Â  Â  Â  Â  Â  Â  Â  speechCommandOverlay.scrollTop = speechCommandOverlay.scrollHeight;

Â  Â  Â  Â  Â  Â  Â  Â  // --- ë¹„ë””ì˜¤ ëª…ë ¹ ì²˜ë¦¬ ë¡œì§ ---
Â  Â  Â  Â  Â  Â  Â  Â  if (latestFinalTranscript) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const transcript = latestFinalTranscript.trim();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let matchedVideoPath = null;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let matchedKeyword = null;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  for (const keyword in modelKeywordMap) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (transcript.includes(keyword)) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  matchedVideoPath = modelKeywordMap[keyword];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  matchedKeyword = keyword;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (matchedVideoPath) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  voiceStatusDisplay.innerText = `ğŸ” ì£¼ì œ í™•ì¸: "${matchedKeyword}" -> ëŒ€í™” ì¬ìƒ ì¤‘.`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (matchedVideoPath === BASE_VIDEO_PATH) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  switchToBaseVideo();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  playSpecificVideo(matchedVideoPath);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  voiceStatusDisplay.innerText = `âš ï¸ ì£¼ì œë¥¼ ì°¾ì§€ ëª»í–ˆì–´ìš”: "${transcript}" -> ì•„ë˜ ìš”ì†Œë“¤ì„ ë§í•´ì£¼ì„¸ìš”.`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â  speechRecognition.onerror = function(event) {
Â  Â  Â  Â  Â  Â  Â  Â  voiceStatusDisplay.innerText = `âŒ ìŒì„± ì¸ì‹ ì˜¤ë¥˜ ë°œìƒ: ${event.error}`;
Â  Â  Â  Â  Â  Â  Â  Â  // ì˜¤ë¥˜ ë°œìƒ ì‹œ ëˆ„ì  ê¸°ë¡ì— ì˜¤ë¥˜ ë©”ì‹œì§€ ì¶”ê°€ ë° ì—…ë°ì´íŠ¸
Â  Â  Â  Â  Â  Â  Â  Â  accumulatedTranscript += `[ì˜¤ë¥˜: ${event.error}]\n`;
Â  Â  Â  Â  Â  Â  Â  Â  speechCommandOverlay.innerHTML = `<div>${accumulatedTranscript.replace(/\n/g, '<br>')}</div>`;
Â  Â  Â  Â  Â  Â  Â  Â  speechCommandOverlay.scrollTop = speechCommandOverlay.scrollHeight;
Â  Â  Â  Â  Â  Â  Â  Â  isListening = false;
Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â  speechRecognition.onend = function() {
Â  Â  Â  Â  Â  Â  Â  Â  isListening = false;
Â  Â  Â  Â  Â  Â  Â  Â  // ì¸ì‹ì´ ë©ˆì¶œ ë•Œ, ì„ì‹œ í…ìŠ¤íŠ¸ë¥¼ ì œê±°í•˜ê³  ëˆ„ì  ê¸°ë¡ë§Œ í‘œì‹œ
Â  Â  Â  Â  Â  Â  Â  Â  speechCommandOverlay.innerHTML = `<div>${accumulatedTranscript.replace(/\n/g, '<br>')}</div>`;	
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  // ì•½ê°„ì˜ ë”œë ˆì´ í›„ ì—°ì† ì¸ì‹ ì¬ì‹œì‘ ë¡œì§ ê°•í™” (ë¹„ë””ì˜¤ ì¬ìƒ ì¤‘ì—ë„ ë§ˆì´í¬ ìœ ì§€)
Â  Â  Â  Â  Â  Â  Â  Â  if (isMediaReady) {	
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // onend í›„ ë°”ë¡œ start() í˜¸ì¶œ ì‹œ ë¸Œë¼ìš°ì €ì— ë”°ë¼ ì˜¤ë¥˜ê°€ ë°œìƒí•  ìˆ˜ ìˆì–´ ë”œë ˆì´ ì¶”ê°€
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (isMediaReady && !isListening) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  speechRecognition.start();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } catch (e) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.warn("ìŒì„± ì¸ì‹ ì¬ì‹œì‘ ì˜¤ë¥˜:", e);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }, 100);	
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  speechRecognition.start();
Â  Â  Â  Â  Â  Â  } catch (e) {
Â  Â  Â  Â  Â  Â  Â  Â  // ì´ë¯¸ ì‹¤í–‰ ì¤‘ì¼ ë•Œ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ ë¬´ì‹œ
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  // ì›¹ìº  ì‹œì‘ í•¨ìˆ˜: ë§ˆì´í¬ ì ‘ê·¼ì„ í¬í•¨í•˜ë„ë¡ ìœ ì§€
Â  Â  Â  Â  async function startWebcam() {
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  // ì›¹ìº (video: true) ë° ë§ˆì´í¬(audio: true) ê¶Œí•œ ìš”ì²­
Â  Â  Â  Â  Â  Â  Â  Â  const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });	
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  // ì˜¤ë””ì˜¤ ì—ì½” ë°©ì§€ë¥¼ ìœ„í•´ ë¹„ë””ì˜¤ íŠ¸ë™ë§Œ ì¶”ì¶œí•˜ì—¬ ë¹„ë””ì˜¤ ìš”ì†Œì— ì—°ê²°
Â  Â  Â  Â  Â  Â  Â  Â  const videoTrack = stream.getVideoTracks()[0];
Â  Â  Â  Â  Â  Â  Â  Â  const videoOnlyStream = new MediaStream([videoTrack]);
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  loadingMessage.style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  videoElement.style.display = 'block';
Â  Â  Â  Â  Â  Â  Â  Â  videoElement.srcObject = videoOnlyStream; // ë¹„ë””ì˜¤ ì „ìš© ìŠ¤íŠ¸ë¦¼ í• ë‹¹
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  isMediaReady = true;

Â  Â  Â  Â  Â  Â  Â  Â  // ë™ì ìœ¼ë¡œ ìƒì„±í•œ í‚¤ì›Œë“œ ëª©ë¡ì„ ì•ˆë‚´ ë©”ì‹œì§€ì— í¬í•¨
Â  Â  Â  Â  Â  Â  Â  Â  voiceStatusDisplay.innerText = `âœ… ì›¹ìº  ë° ë§ˆì´í¬ ì ‘ê·¼ ì™„ë£Œ. ìŒì„± ì¸ì‹ì„ ì‹œì‘í•©ë‹ˆë‹¤: "${keywords}"`;

Â  Â  Â  Â  Â  Â  Â  Â  // ì ‘ê·¼ ì„±ê³µ í›„ ìŒì„± ì¸ì‹ ì‹œì‘ (ë§ˆì´í¬ ì†Œë¦¬ëŠ” SpeechRecognitionì´ ì‚¬ìš©)
Â  Â  Â  Â  Â  Â  Â  Â  startSpeechRecognition();	

Â  Â  Â  Â  Â  Â  } catch (err) {
Â  Â  Â  Â  Â  Â  Â  Â  console.error("ì›¹ìº /ë§ˆì´í¬ ì ‘ê·¼ ê¶Œí•œ ê±°ë¶€ ë˜ëŠ” ì˜¤ë¥˜ ë°œìƒ:", err);
Â  Â  Â  Â  Â  Â  Â  Â  loadingMessage.innerText = "ì›¹ìº  ë˜ëŠ” ë§ˆì´í¬ ì ‘ê·¼ ê¶Œí•œì´ ê±°ë¶€ë˜ì—ˆìŠµë‹ˆë‹¤. ëª¨ë‘ í—ˆìš©í•´ ì£¼ì„¸ìš”.";
Â  Â  Â  Â  Â  Â  Â  Â  loadingMessage.style.color = '#ff6b6b';
Â  Â  Â  Â  Â  Â  Â  Â  voiceStatusDisplay.innerText = 'âŒ ì›¹ìº /ë§ˆì´í¬ ì ‘ê·¼ ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.';
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  window.onload = startWebcam;	

Â  Â  Â  Â  // =================================================================
Â  Â  Â  Â  // 3. Three.js 3D ë·°ì–´ ë¡œì§ (ê°œì„ )
Â  Â  Â  Â  // =================================================================
Â  Â  Â  Â  import * as THREE from 'three';
Â  Â  Â  Â  import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';
Â  Â  Â  Â  import { OrbitControls } from 'three/addons/controls/OrbitControls.js';

Â  Â  Â  Â  const threeJsContainer = document.getElementById('threejs-container');

Â  Â  Â  Â  let currentIntersected = null; // í˜„ì¬ ë§ˆìš°ìŠ¤ ì˜¤ë²„ëœ ëª¨ë¸
Â  Â  Â  Â  let rotationSpeed = 0.005;
Â  Â  Â  Â  const raycaster = new THREE.Raycaster();
Â  Â  Â  Â  const mouse = new THREE.Vector2();
Â  Â  Â  Â  
Â  Â  Â  Â  // modelsToLoadëŠ” ìœ„ì—ì„œ ì •ì˜ë¨ (ì¬ì‚¬ìš©)

Â  Â  Â  Â  const FIXED_POSITION_Y = 0.0;
Â  Â  Â  Â  const FIXED_POSITION_Z = 0.0;
Â  Â  Â  Â  const MODEL_SPACING_X = 3.0;
Â  Â  Â  Â  const HOVER_SCALE_FACTOR = 1.2;

Â  Â  Â  Â  const scene = new THREE.Scene();
Â  Â  Â  Â  // 3D ëª¨ë¸ ê°€ì‹œì„±ì„ ìœ„í•´ ë°°ê²½ìƒ‰ì„ WhiteSmokeë¡œ ë³€ê²½
Â  Â  Â  Â  scene.background = new THREE.Color(0xf5f5f5); 

Â  Â  Â  Â  // ì¹´ë©”ë¼ ìƒì„± ì‹œ ì»¨í…Œì´ë„ˆì˜ í˜„ì¬ í¬ê¸°ë¥¼ ì‚¬ìš©
Â  Â  Â  Â  const camera = new THREE.PerspectiveCamera(50, threeJsContainer.clientWidth / threeJsContainer.clientHeight, 0.1, 1000);
Â  Â  Â  Â  camera.position.set(0, 0, 15);

Â  Â  Â  Â  const renderer = new THREE.WebGLRenderer({ antialias: true });
Â  Â  Â  Â  renderer.setSize(threeJsContainer.clientWidth, threeJsContainer.clientHeight);
Â  Â  Â  Â  threeJsContainer.appendChild(renderer.domElement);

Â  Â  Â  Â  const ambientLight = new THREE.AmbientLight(0xffffff, 0.8);
Â  Â  Â  Â  scene.add(ambientLight);

Â  Â  Â  Â  const directionalLight = new THREE.DirectionalLight(0xffffff, 1.5);
Â  Â  Â  Â  directionalLight.position.set(5, 10, 7).normalize();
Â  Â  Â  Â  scene.add(directionalLight);

Â  Â  Â  Â  const controls = new OrbitControls(camera, renderer.domElement);
Â  Â  Â  Â  controls.enableDamping = true;
Â  Â  Â  Â  controls.target.set(0, FIXED_POSITION_Y, 0);	
Â  Â  Â  Â  controls.enablePan = false;
Â  Â  Â  Â  controls.enableRotate = true;
Â  Â  Â  Â  controls.maxDistance = 20;
Â  Â  Â  Â  controls.minDistance = 5;

Â  Â  Â  Â  const loader = new GLTFLoader();
Â  Â  Â  Â  const modelCount = modelsToLoad.length;
Â  Â  Â  Â  const startX = -((modelCount - 1) * MODEL_SPACING_X) / 2;

Â  Â  Â  Â  modelsToLoad.forEach((modelInfo, index) => {
Â  Â  Â  Â  Â  Â  loader.load(
Â  Â  Â  Â  Â  Â  Â  Â  modelInfo.name,
Â  Â  Â  Â  Â  Â  Â  Â  function (gltf) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const model = gltf.scene;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  model.position.x = startX + (index * MODEL_SPACING_X);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  model.position.y = FIXED_POSITION_Y;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  model.position.z = FIXED_POSITION_Z;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  model.scale.set(modelInfo.scale, modelInfo.scale, modelInfo.scale);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  model.userData.modelName = modelInfo.name;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  model.userData.modelVideo = modelInfo.video;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  model.userData.originalScale = model.scale.clone();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  scene.add(model);
Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  undefined,
Â  Â  Â  Â  Â  Â  Â  Â  function (error) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.error(`ëª¨ë¸ ë¡œë“œ ì¤‘ ì—ëŸ¬ ë°œìƒ: ${modelInfo.name}`, error);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  });

Â  Â  Â  Â  renderer.domElement.addEventListener('mousemove', onThreeJsMouseMove, false);
Â  Â  Â  Â  renderer.domElement.addEventListener('click', onThreeJsClick, false);
Â  Â  Â  Â  renderer.domElement.addEventListener('mouseleave', onThreeJsMouseLeave, false);


Â  Â  Â  Â  function onThreeJsMouseMove(event) {
Â  Â  Â  Â  Â  Â  const rect = renderer.domElement.getBoundingClientRect();
Â  Â  Â  Â  Â  Â  mouse.x = ((event.clientX - rect.left) / rect.width) * 2 - 1;
Â  Â  Â  Â  Â  Â  mouse.y = -((event.clientY - rect.top) / rect.height) * 2 + 1;

Â  Â  Â  Â  Â  Â  raycaster.setFromCamera(mouse, camera);
Â  Â  Â  Â  Â  Â  const intersects = raycaster.intersectObjects(scene.children, true);

Â  Â  Â  Â  Â  Â  let newIntersected = null;

Â  Â  Â  Â  Â  Â  if (intersects.length > 0) {
Â  Â  Â  Â  Â  Â  Â  Â  let target = intersects[0].object;
Â  Â  Â  Â  Â  Â  Â  Â  while (target.parent && target.parent !== scene) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  target = target.parent;
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  if (target.parent === scene) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  newIntersected = target;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  // ë§ˆìš°ìŠ¤ ì˜¤ë²„ ìƒíƒœ ë³€ê²½ ê°ì§€
Â  Â  Â  Â  Â  Â  if (currentIntersected !== newIntersected) {
Â  Â  Â  Â  Â  Â  Â  Â  // ì´ì „ ëª¨ë¸ í¬ê¸° ë³µì›
Â  Â  Â  Â  Â  Â  Â  Â  if (currentIntersected) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  currentIntersected.scale.copy(currentIntersected.userData.originalScale);
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  // ìƒˆ ëª¨ë¸ í¬ê¸° í™•ëŒ€
Â  Â  Â  Â  Â  Â  Â  Â  currentIntersected = newIntersected;

Â  Â  Â  Â  Â  Â  Â  Â  if (currentIntersected) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  currentIntersected.scale.multiplyScalar(HOVER_SCALE_FACTOR);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  function onThreeJsMouseLeave() {
Â  Â  Â  Â  Â  Â  if (currentIntersected) {
Â  Â  Â  Â  Â  Â  Â  Â  currentIntersected.scale.copy(currentIntersected.userData.originalScale);
Â  Â  Â  Â  Â  Â  Â  Â  currentIntersected = null;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  function onThreeJsClick(event) {
Â  Â  Â  Â  Â  Â  if (currentIntersected && currentIntersected.userData.modelVideo) {
Â  Â  Â  Â  Â  Â  Â  Â  playSpecificVideo(currentIntersected.userData.modelVideo);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }


Â  Â  Â  Â  function animate() {
Â  Â  Â  Â  Â  Â  requestAnimationFrame(animate);
Â  Â  Â  Â  Â  Â  controls.update();

Â  Â  Â  Â  Â  Â  // ë§ˆìš°ìŠ¤ ì˜¤ë²„ëœ ëª¨ë¸ë§Œ ë¹ ë¥´ê²Œ íšŒì „, ë‚˜ë¨¸ì§€ëŠ” ëŠë¦¬ê²Œ ìë™ íšŒì „
Â  Â  Â  Â  Â  Â  scene.children.forEach(object => {
Â  Â  Â  Â  Â  Â  Â  Â  if (object.isGroup || object.isMesh) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (object === currentIntersected) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  object.rotation.y += rotationSpeed * 5;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  object.rotation.y += rotationSpeed;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  renderer.render(scene, camera);
Â  Â  Â  Â  }

Â  Â  Â  Â  animate();

Â  Â  Â  Â  // ìœˆë„ìš° í¬ê¸° ë³€ê²½ ì‹œ 3D ë·°ì–´ í¬ê¸° ì¡°ì • (Flexbox ë†’ì´ì— ë§ì¶¤)
Â  Â  Â  Â  window.addEventListener('resize', () => {
Â  Â  Â  Â  Â  Â  camera.aspect = threeJsContainer.clientWidth / threeJsContainer.clientHeight;
Â  Â  Â  Â  Â  Â  camera.updateProjectionMatrix();
Â  Â  Â  Â  Â  Â  renderer.setSize(threeJsContainer.clientWidth, threeJsContainer.clientHeight);
Â  Â  Â  Â  });
Â  Â  </script>
</body>
</html>
